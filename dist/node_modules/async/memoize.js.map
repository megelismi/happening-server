{"version":3,"sources":["../../../node_modules/async/memoize.js"],"names":["Object","defineProperty","exports","value","default","memoize","_identity","require","_identity2","_interopRequireDefault","_rest","_rest2","_setImmediate","_setImmediate2","_initialParams","_initialParams2","obj","__esModule","has","key","fn","hasher","memo","create","queues","memoized","args","callback","apply","push","concat","q","i","l","length","unmemoized","module"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;AAGAD,QAAQE,OAAR,GAAkBC,OAAlB;;AAEA,IAAIC,YAAYC,QAAQ,iBAAR,CAAhB;;AAEA,IAAIC,aAAaC,uBAAuBH,SAAvB,CAAjB;;AAEA,IAAII,QAAQH,QAAQ,iBAAR,CAAZ;;AAEA,IAAII,SAASF,uBAAuBC,KAAvB,CAAb;;AAEA,IAAIE,gBAAgBL,QAAQ,yBAAR,CAApB;;AAEA,IAAIM,iBAAiBJ,uBAAuBG,aAAvB,CAArB;;AAEA,IAAIE,iBAAiBP,QAAQ,0BAAR,CAArB;;AAEA,IAAIQ,kBAAkBN,uBAAuBK,cAAvB,CAAtB;;AAEA,SAASL,sBAAT,CAAgCO,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEZ,SAASY,GAAX,EAArC;AAAwD;;AAE/F,SAASE,GAAT,CAAaF,GAAb,EAAkBG,GAAlB,EAAuB;AACnB,WAAOA,OAAOH,GAAd;AACH;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,SAASX,OAAT,CAAiBe,EAAjB,EAAqBC,MAArB,EAA6B;AACzB,QAAIC,OAAOtB,OAAOuB,MAAP,CAAc,IAAd,CAAX;AACA,QAAIC,SAASxB,OAAOuB,MAAP,CAAc,IAAd,CAAb;AACAF,aAASA,UAAUb,WAAWJ,OAA9B;AACA,QAAIqB,WAAW,CAAC,GAAGV,gBAAgBX,OAApB,EAA6B,SAASqB,QAAT,CAAkBC,IAAlB,EAAwBC,QAAxB,EAAkC;AAC1E,YAAIR,MAAME,OAAOO,KAAP,CAAa,IAAb,EAAmBF,IAAnB,CAAV;AACA,YAAIR,IAAII,IAAJ,EAAUH,GAAV,CAAJ,EAAoB;AAChB,aAAC,GAAGN,eAAeT,OAAnB,EAA4B,YAAY;AACpCuB,yBAASC,KAAT,CAAe,IAAf,EAAqBN,KAAKH,GAAL,CAArB;AACH,aAFD;AAGH,SAJD,MAIO,IAAID,IAAIM,MAAJ,EAAYL,GAAZ,CAAJ,EAAsB;AACzBK,mBAAOL,GAAP,EAAYU,IAAZ,CAAiBF,QAAjB;AACH,SAFM,MAEA;AACHH,mBAAOL,GAAP,IAAc,CAACQ,QAAD,CAAd;AACAP,eAAGQ,KAAH,CAAS,IAAT,EAAeF,KAAKI,MAAL,CAAY,CAAC,CAAC,GAAGnB,OAAOP,OAAX,EAAoB,UAAUsB,IAAV,EAAgB;AAC5DJ,qBAAKH,GAAL,IAAYO,IAAZ;AACA,oBAAIK,IAAIP,OAAOL,GAAP,CAAR;AACA,uBAAOK,OAAOL,GAAP,CAAP;AACA,qBAAK,IAAIa,IAAI,CAAR,EAAWC,IAAIF,EAAEG,MAAtB,EAA8BF,IAAIC,CAAlC,EAAqCD,GAArC,EAA0C;AACtCD,sBAAEC,CAAF,EAAKJ,KAAL,CAAW,IAAX,EAAiBF,IAAjB;AACH;AACJ,aAP2B,CAAD,CAAZ,CAAf;AAQH;AACJ,KAnBc,CAAf;AAoBAD,aAASH,IAAT,GAAgBA,IAAhB;AACAG,aAASU,UAAT,GAAsBf,EAAtB;AACA,WAAOK,QAAP;AACH;AACDW,OAAOlC,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"memoize.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = memoize;\n\nvar _identity = require('lodash/identity');\n\nvar _identity2 = _interopRequireDefault(_identity);\n\nvar _rest = require('./internal/rest');\n\nvar _rest2 = _interopRequireDefault(_rest);\n\nvar _setImmediate = require('./internal/setImmediate');\n\nvar _setImmediate2 = _interopRequireDefault(_setImmediate);\n\nvar _initialParams = require('./internal/initialParams');\n\nvar _initialParams2 = _interopRequireDefault(_initialParams);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction has(obj, key) {\n    return key in obj;\n}\n\n/**\n * Caches the results of an `async` function. When creating a hash to store\n * function results against, the callback is omitted from the hash and an\n * optional hash function can be used.\n *\n * If no hash function is specified, the first argument is used as a hash key,\n * which may work reasonably if it is a string or a data type that converts to a\n * distinct string. Note that objects and arrays will not behave reasonably.\n * Neither will cases where the other arguments are significant. In such cases,\n * specify your own hash function.\n *\n * The cache of results is exposed as the `memo` property of the function\n * returned by `memoize`.\n *\n * @name memoize\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {Function} fn - The function to proxy and cache results from.\n * @param {Function} hasher - An optional function for generating a custom hash\n * for storing results. It has all the arguments applied to it apart from the\n * callback, and must be synchronous.\n * @returns {Function} a memoized version of `fn`\n * @example\n *\n * var slow_fn = function(name, callback) {\n *     // do something\n *     callback(null, result);\n * };\n * var fn = async.memoize(slow_fn);\n *\n * // fn can now be used as if it were slow_fn\n * fn('some name', function() {\n *     // callback\n * });\n */\nfunction memoize(fn, hasher) {\n    var memo = Object.create(null);\n    var queues = Object.create(null);\n    hasher = hasher || _identity2.default;\n    var memoized = (0, _initialParams2.default)(function memoized(args, callback) {\n        var key = hasher.apply(null, args);\n        if (has(memo, key)) {\n            (0, _setImmediate2.default)(function () {\n                callback.apply(null, memo[key]);\n            });\n        } else if (has(queues, key)) {\n            queues[key].push(callback);\n        } else {\n            queues[key] = [callback];\n            fn.apply(null, args.concat([(0, _rest2.default)(function (args) {\n                memo[key] = args;\n                var q = queues[key];\n                delete queues[key];\n                for (var i = 0, l = q.length; i < l; i++) {\n                    q[i].apply(null, args);\n                }\n            })]));\n        }\n    });\n    memoized.memo = memo;\n    memoized.unmemoized = fn;\n    return memoized;\n}\nmodule.exports = exports['default'];"]}