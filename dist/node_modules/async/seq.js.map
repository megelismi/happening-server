{"version":3,"sources":["../../../node_modules/async/seq.js"],"names":["Object","defineProperty","exports","value","_noop","require","_noop2","_interopRequireDefault","_rest","_rest2","_reduce","_reduce2","obj","__esModule","default","seq","functions","args","that","cb","length","pop","newargs","fn","apply","concat","err","nextargs","results","module"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;;AAIA,IAAIC,QAAQC,QAAQ,aAAR,CAAZ;;AAEA,IAAIC,SAASC,uBAAuBH,KAAvB,CAAb;;AAEA,IAAII,QAAQH,QAAQ,iBAAR,CAAZ;;AAEA,IAAII,SAASF,uBAAuBC,KAAvB,CAAb;;AAEA,IAAIE,UAAUL,QAAQ,UAAR,CAAd;;AAEA,IAAIM,WAAWJ,uBAAuBG,OAAvB,CAAf;;AAEA,SAASH,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCAV,QAAQY,OAAR,GAAkB,CAAC,GAAGL,OAAOK,OAAX,EAAoB,SAASC,GAAT,CAAaC,SAAb,EAAwB;AAC1D,WAAO,CAAC,GAAGP,OAAOK,OAAX,EAAoB,UAAUG,IAAV,EAAgB;AACvC,YAAIC,OAAO,IAAX;;AAEA,YAAIC,KAAKF,KAAKA,KAAKG,MAAL,GAAc,CAAnB,CAAT;AACA,YAAI,OAAOD,EAAP,IAAa,UAAjB,EAA6B;AACzBF,iBAAKI,GAAL;AACH,SAFD,MAEO;AACHF,iBAAKb,OAAOQ,OAAZ;AACH;;AAED,SAAC,GAAGH,SAASG,OAAb,EAAsBE,SAAtB,EAAiCC,IAAjC,EAAuC,UAAUK,OAAV,EAAmBC,EAAnB,EAAuBJ,EAAvB,EAA2B;AAC9DI,eAAGC,KAAH,CAASN,IAAT,EAAeI,QAAQG,MAAR,CAAe,CAAC,CAAC,GAAGhB,OAAOK,OAAX,EAAoB,UAAUY,GAAV,EAAeC,QAAf,EAAyB;AACxER,mBAAGO,GAAH,EAAQC,QAAR;AACH,aAF8B,CAAD,CAAf,CAAf;AAGH,SAJD,EAIG,UAAUD,GAAV,EAAeE,OAAf,EAAwB;AACvBT,eAAGK,KAAH,CAASN,IAAT,EAAe,CAACQ,GAAD,EAAMD,MAAN,CAAaG,OAAb,CAAf;AACH,SAND;AAOH,KAjBM,CAAP;AAkBH,CAnBiB,CAAlB;AAoBAC,OAAO3B,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"seq.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _rest = require('./internal/rest');\n\nvar _rest2 = _interopRequireDefault(_rest);\n\nvar _reduce = require('./reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Version of the compose function that is more natural to read. Each function\n * consumes the return value of the previous function. It is the equivalent of\n * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name seq\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.compose]{@link module:ControlFlow.compose}\n * @category Control Flow\n * @param {...Function} functions - the asynchronous functions to compose\n * @returns {Function} a function that composes the `functions` in order\n * @example\n *\n * // Requires lodash (or underscore), express3 and dresende's orm2.\n * // Part of an app, that fetches cats of the logged user.\n * // This example uses `seq` function to avoid overnesting and error\n * // handling clutter.\n * app.get('/cats', function(request, response) {\n *     var User = request.models.User;\n *     async.seq(\n *         _.bind(User.get, User),  // 'User.get' has signature (id, callback(err, data))\n *         function(user, fn) {\n *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n *         }\n *     )(req.session.user_id, function (err, cats) {\n *         if (err) {\n *             console.error(err);\n *             response.json({ status: 'error', message: err.message });\n *         } else {\n *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n *         }\n *     });\n * });\n */\nexports.default = (0, _rest2.default)(function seq(functions) {\n    return (0, _rest2.default)(function (args) {\n        var that = this;\n\n        var cb = args[args.length - 1];\n        if (typeof cb == 'function') {\n            args.pop();\n        } else {\n            cb = _noop2.default;\n        }\n\n        (0, _reduce2.default)(functions, args, function (newargs, fn, cb) {\n            fn.apply(that, newargs.concat([(0, _rest2.default)(function (err, nextargs) {\n                cb(err, nextargs);\n            })]));\n        }, function (err, results) {\n            cb.apply(that, [err].concat(results));\n        });\n    });\n});\nmodule.exports = exports['default'];"]}