{"version":3,"sources":["../../../../node_modules/babel-plugin-transform-function-bind/lib/index.js"],"names":["exports","__esModule","default","_ref","t","types","getTempId","scope","id","path","getData","generateDeclaredUidIdentifier","setData","getStaticContext","bind","object","callee","isStatic","inferBindContext","staticContext","tempId","sequenceExpression","assignmentExpression","inherits","require","visitor","CallExpression","_ref2","node","isBindExpression","context","memberExpression","identifier","arguments","unshift","BindExpression","replaceWith","callExpression","module"],"mappings":"AAAA;;AAEAA,QAAQC,UAAR,GAAqB,IAArB;;AAEAD,QAAQE,OAAR,GAAkB,UAAUC,IAAV,EAAgB;AAChC,MAAIC,IAAID,KAAKE,KAAb;;AAEA,WAASC,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,QAAIC,KAAKD,MAAME,IAAN,CAAWC,OAAX,CAAmB,cAAnB,CAAT;AACA,QAAIF,EAAJ,EAAQ,OAAOA,EAAP;;AAERA,SAAKD,MAAMI,6BAAN,CAAoC,SAApC,CAAL;AACA,WAAOJ,MAAME,IAAN,CAAWG,OAAX,CAAmB,cAAnB,EAAmCJ,EAAnC,CAAP;AACD;;AAED,WAASK,gBAAT,CAA0BC,IAA1B,EAAgCP,KAAhC,EAAuC;AACrC,QAAIQ,SAASD,KAAKC,MAAL,IAAeD,KAAKE,MAAL,CAAYD,MAAxC;AACA,WAAOR,MAAMU,QAAN,CAAeF,MAAf,KAA0BA,MAAjC;AACD;;AAED,WAASG,gBAAT,CAA0BJ,IAA1B,EAAgCP,KAAhC,EAAuC;AACrC,QAAIY,gBAAgBN,iBAAiBC,IAAjB,EAAuBP,KAAvB,CAApB;AACA,QAAIY,aAAJ,EAAmB,OAAOA,aAAP;;AAEnB,QAAIC,SAASd,UAAUC,KAAV,CAAb;AACA,QAAIO,KAAKC,MAAT,EAAiB;AACfD,WAAKE,MAAL,GAAcZ,EAAEiB,kBAAF,CAAqB,CAACjB,EAAEkB,oBAAF,CAAuB,GAAvB,EAA4BF,MAA5B,EAAoCN,KAAKC,MAAzC,CAAD,EAAmDD,KAAKE,MAAxD,CAArB,CAAd;AACD,KAFD,MAEO;AACLF,WAAKE,MAAL,CAAYD,MAAZ,GAAqBX,EAAEkB,oBAAF,CAAuB,GAAvB,EAA4BF,MAA5B,EAAoCN,KAAKE,MAAL,CAAYD,MAAhD,CAArB;AACD;AACD,WAAOK,MAAP;AACD;;AAED,SAAO;AACLG,cAAUC,QAAQ,mCAAR,CADL;;AAGLC,aAAS;AACPC,sBAAgB,SAASA,cAAT,CAAwBC,KAAxB,EAA+B;AAC7C,YAAIC,OAAOD,MAAMC,IAAjB;AAAA,YACIrB,QAAQoB,MAAMpB,KADlB;;AAGA,YAAIO,OAAOc,KAAKZ,MAAhB;AACA,YAAI,CAACZ,EAAEyB,gBAAF,CAAmBf,IAAnB,CAAL,EAA+B;;AAE/B,YAAIgB,UAAUZ,iBAAiBJ,IAAjB,EAAuBP,KAAvB,CAAd;AACAqB,aAAKZ,MAAL,GAAcZ,EAAE2B,gBAAF,CAAmBjB,KAAKE,MAAxB,EAAgCZ,EAAE4B,UAAF,CAAa,MAAb,CAAhC,CAAd;AACAJ,aAAKK,SAAL,CAAeC,OAAf,CAAuBJ,OAAvB;AACD,OAXM;AAYPK,sBAAgB,SAASA,cAAT,CAAwB1B,IAAxB,EAA8B;AAC5C,YAAImB,OAAOnB,KAAKmB,IAAhB;AAAA,YACIrB,QAAQE,KAAKF,KADjB;;AAGA,YAAIuB,UAAUZ,iBAAiBU,IAAjB,EAAuBrB,KAAvB,CAAd;AACAE,aAAK2B,WAAL,CAAiBhC,EAAEiC,cAAF,CAAiBjC,EAAE2B,gBAAF,CAAmBH,KAAKZ,MAAxB,EAAgCZ,EAAE4B,UAAF,CAAa,MAAb,CAAhC,CAAjB,EAAwE,CAACF,OAAD,CAAxE,CAAjB;AACD;AAlBM;AAHJ,GAAP;AAwBD,CArDD;;AAuDAQ,OAAOtC,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (_ref) {\n  var t = _ref.types;\n\n  function getTempId(scope) {\n    var id = scope.path.getData(\"functionBind\");\n    if (id) return id;\n\n    id = scope.generateDeclaredUidIdentifier(\"context\");\n    return scope.path.setData(\"functionBind\", id);\n  }\n\n  function getStaticContext(bind, scope) {\n    var object = bind.object || bind.callee.object;\n    return scope.isStatic(object) && object;\n  }\n\n  function inferBindContext(bind, scope) {\n    var staticContext = getStaticContext(bind, scope);\n    if (staticContext) return staticContext;\n\n    var tempId = getTempId(scope);\n    if (bind.object) {\n      bind.callee = t.sequenceExpression([t.assignmentExpression(\"=\", tempId, bind.object), bind.callee]);\n    } else {\n      bind.callee.object = t.assignmentExpression(\"=\", tempId, bind.callee.object);\n    }\n    return tempId;\n  }\n\n  return {\n    inherits: require(\"babel-plugin-syntax-function-bind\"),\n\n    visitor: {\n      CallExpression: function CallExpression(_ref2) {\n        var node = _ref2.node,\n            scope = _ref2.scope;\n\n        var bind = node.callee;\n        if (!t.isBindExpression(bind)) return;\n\n        var context = inferBindContext(bind, scope);\n        node.callee = t.memberExpression(bind.callee, t.identifier(\"call\"));\n        node.arguments.unshift(context);\n      },\n      BindExpression: function BindExpression(path) {\n        var node = path.node,\n            scope = path.scope;\n\n        var context = inferBindContext(node, scope);\n        path.replaceWith(t.callExpression(t.memberExpression(node.callee, t.identifier(\"bind\")), [context]));\n      }\n    }\n  };\n};\n\nmodule.exports = exports[\"default\"];"]}