{"version":3,"sources":["../../../../node_modules/babel-plugin-transform-class-constructor-call/lib/index.js"],"names":["exports","__esModule","_getIterator2","require","_getIterator3","_interopRequireDefault","_symbol","_symbol2","default","_ref","t","types","ALREADY_VISITED","findConstructorCall","path","methods","get","_iterator","_isArray","Array","isArray","_i","_ref2","length","next","done","value","method","node","kind","handleClassWithCall","constructorCall","classPath","_classPath","ref","id","scope","generateUidIdentifier","parentPath","isExportDefaultDeclaration","insertAfter","exportDefaultDeclaration","replaceWithMultiple","buildWrapper","CLASS_REF","name","CALL_REF","CALL","functionExpression","params","body","CLASS","toExpression","WRAPPER_REF","remove","inherits","visitor","Class","_babelTemplate","_babelTemplate2","obj","module"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _symbol = require(\"babel-runtime/core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nexports.default = function (_ref) {\n  var t = _ref.types;\n\n  var ALREADY_VISITED = (0, _symbol2.default)();\n\n  function findConstructorCall(path) {\n    var methods = path.get(\"body.body\");\n\n    for (var _iterator = methods, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref2;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref2 = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref2 = _i.value;\n      }\n\n      var method = _ref2;\n\n      if (method.node.kind === \"constructorCall\") {\n        return method;\n      }\n    }\n\n    return null;\n  }\n\n  function handleClassWithCall(constructorCall, classPath) {\n    var _classPath = classPath,\n        node = _classPath.node;\n\n    var ref = node.id || classPath.scope.generateUidIdentifier(\"class\");\n\n    if (classPath.parentPath.isExportDefaultDeclaration()) {\n      classPath = classPath.parentPath;\n      classPath.insertAfter(t.exportDefaultDeclaration(ref));\n    }\n\n    classPath.replaceWithMultiple(buildWrapper({\n      CLASS_REF: classPath.scope.generateUidIdentifier(ref.name),\n      CALL_REF: classPath.scope.generateUidIdentifier(ref.name + \"Call\"),\n      CALL: t.functionExpression(null, constructorCall.node.params, constructorCall.node.body),\n      CLASS: t.toExpression(node),\n      WRAPPER_REF: ref\n    }));\n\n    constructorCall.remove();\n  }\n\n  return {\n    inherits: require(\"babel-plugin-syntax-class-constructor-call\"),\n\n    visitor: {\n      Class: function Class(path) {\n        if (path.node[ALREADY_VISITED]) return;\n        path.node[ALREADY_VISITED] = true;\n\n        var constructorCall = findConstructorCall(path);\n\n        if (constructorCall) {\n          handleClassWithCall(constructorCall, path);\n        } else {\n          return;\n        }\n      }\n    }\n  };\n};\n\nvar _babelTemplate = require(\"babel-template\");\n\nvar _babelTemplate2 = _interopRequireDefault(_babelTemplate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar buildWrapper = (0, _babelTemplate2.default)(\"\\n  let CLASS_REF = CLASS;\\n  var CALL_REF = CALL;\\n  var WRAPPER_REF = function (...args) {\\n    if (this instanceof WRAPPER_REF) {\\n      return Reflect.construct(CLASS_REF, args);\\n    } else {\\n      return CALL_REF.apply(this, args);\\n    }\\n  };\\n  WRAPPER_REF.__proto__ = CLASS_REF;\\n  WRAPPER_REF;\\n\");\n\nmodule.exports = exports[\"default\"];"]}