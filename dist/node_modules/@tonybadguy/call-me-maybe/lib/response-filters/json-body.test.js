'use strict';

var _test = require('tap').test;
var _jsonBody = require('./json-body');

_test('Parse object', function (assert) {
  assert.plan(1);

  var result = _jsonBody.filter({
    body: '{"foo":"bar"}'
  });

  assert.equals(result.jsonBody.foo, 'bar');
});

_test('Parse array', function (assert) {
  assert.plan(1);

  var result = _jsonBody.filter({
    body: '[123]'
  });

  assert.equals(result.jsonBody[0], 123);
});

_test('Parse number', function (assert) {
  assert.plan(1);

  var result = _jsonBody.filter({
    body: '123'
  });

  assert.equals(result.jsonBody, 123);
});

_test('Does not parse standalone string', function (assert) {
  assert.plan(1);

  var result = _jsonBody.filter({
    body: 'abc'
  });

  assert.equals(result.jsonBody, undefined);
});

_test('Parse exceptions are ignored', function (assert) {
  assert.plan(1);

  var result = _jsonBody.filter({
    body: '{1a]'
  });

  assert.equals(result.jsonBody, undefined);
});
//# sourceMappingURL=json-body.test.js.map