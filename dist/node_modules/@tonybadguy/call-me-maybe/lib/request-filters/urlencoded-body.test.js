'use strict';

var _test = require('tap').test;
var _urlencodedBody = require('./urlencoded-body');

_test('Body replaced with urlencodedBody if exists', function (assert) {
  assert.plan(1);
  var request = {
    body: 'nonsense',
    urlencodedBody: {
      greeting: 'oh hai'
    }
  };

  var result = _urlencodedBody.filter(request);

  assert.equals(result.body, 'greeting=oh%20hai');
});

_test('Body and headers unchanged if jsonBody not set', function (assert) {
  assert.plan(2);
  var request = {
    body: 'expected'
  };

  var result = _urlencodedBody.filter(request);

  assert.equals(result.body, 'expected');
  assert.equals(result.headers, undefined);
});

_test('Sets content-type header', function (assert) {
  assert.plan(1);
  var request = {
    urlencodedBody: {}
  };

  var result = _urlencodedBody.filter(request);

  assert.equals(result.headers['Content-Type'], 'application/x-www-form-urlencoded');
});
//# sourceMappingURL=urlencoded-body.test.js.map