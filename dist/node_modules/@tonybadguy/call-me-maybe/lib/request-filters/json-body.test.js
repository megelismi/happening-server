'use strict';

var _test = require('tap').test;
var _jsonBody = require('./json-body');

_test('Body replaced with jsonBody if exists', function (assert) {
  var request = {
    body: 'nonsense',
    jsonBody: {
      greeting: 'oh hai'
    }
  };

  var result = _jsonBody.filter(request);

  assert.equals(JSON.parse(result.body).greeting, 'oh hai');
  assert.end();
});

_test('Body and headers unchanged if jsonBody not set', function (assert) {
  var request = {
    body: 'expected'
  };

  var result = _jsonBody.filter(request);

  assert.equals(result.body, 'expected');
  assert.equals(result.headers, undefined);
  assert.end();
});

_test('Sets content-type header', function (assert) {
  var request = {
    jsonBody: {}
  };

  var result = _jsonBody.filter(request);

  assert.equals(result.headers['Content-Type'], 'application/json');
  assert.end();
});
//# sourceMappingURL=json-body.test.js.map