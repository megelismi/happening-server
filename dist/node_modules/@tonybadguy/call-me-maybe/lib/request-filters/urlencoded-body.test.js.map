{"version":3,"sources":["../../../../../../node_modules/@tonybadguy/call-me-maybe/lib/request-filters/urlencoded-body.test.js"],"names":["_test","require","test","_urlencodedBody","assert","plan","request","body","urlencodedBody","greeting","result","filter","equals","headers","undefined"],"mappings":"AAAA;;AAEA,IAAMA,QAAQC,QAAQ,KAAR,EAAeC,IAA7B;AACA,IAAMC,kBAAkBF,QAAQ,mBAAR,CAAxB;;AAEAD,MAAM,6CAAN,EAAqD,kBAAS;AAC5DI,SAAOC,IAAP,CAAY,CAAZ;AACA,MAAMC,UAAU;AACdC,UAAM,UADQ;AAEdC,oBAAe;AACbC,gBAAS;AADI;AAFD,GAAhB;;AAOA,MAAMC,SAASP,gBAAgBQ,MAAhB,CAAuBL,OAAvB,CAAf;;AAEAF,SAAOQ,MAAP,CAAcF,OAAOH,IAArB,EAA2B,mBAA3B;AACD,CAZD;;AAcAP,MAAM,gDAAN,EAAwD,kBAAS;AAC/DI,SAAOC,IAAP,CAAY,CAAZ;AACA,MAAMC,UAAU;AACdC,UAAM;AADQ,GAAhB;;AAIA,MAAMG,SAASP,gBAAgBQ,MAAhB,CAAuBL,OAAvB,CAAf;;AAEAF,SAAOQ,MAAP,CAAcF,OAAOH,IAArB,EAA2B,UAA3B;AACAH,SAAOQ,MAAP,CAAcF,OAAOG,OAArB,EAA8BC,SAA9B;AACD,CAVD;;AAYAd,MAAM,0BAAN,EAAkC,kBAAS;AACzCI,SAAOC,IAAP,CAAY,CAAZ;AACA,MAAMC,UAAU;AACdE,oBAAe;AADD,GAAhB;;AAIA,MAAME,SAASP,gBAAgBQ,MAAhB,CAAuBL,OAAvB,CAAf;;AAEAF,SAAOQ,MAAP,CAAcF,OAAOG,OAAP,CAAe,cAAf,CAAd,EAA8C,mCAA9C;AACD,CATD","file":"urlencoded-body.test.js","sourcesContent":["'use strict';\n\nconst _test = require('tap').test;\nconst _urlencodedBody = require('./urlencoded-body');\n\n_test('Body replaced with urlencodedBody if exists', assert =>{\n  assert.plan(1);\n  const request = {\n    body: 'nonsense',\n    urlencodedBody:{\n      greeting:'oh hai'\n    }\n  };\n  \n  const result = _urlencodedBody.filter(request);\n  \n  assert.equals(result.body, 'greeting=oh%20hai');\n});\n\n_test('Body and headers unchanged if jsonBody not set', assert =>{\n  assert.plan(2);\n  const request = {\n    body: 'expected'\n  };\n  \n  const result = _urlencodedBody.filter(request);\n  \n  assert.equals(result.body, 'expected');\n  assert.equals(result.headers, undefined);\n});\n\n_test('Sets content-type header', assert =>{\n  assert.plan(1);\n  const request = {\n    urlencodedBody:{}\n  };\n  \n  const result = _urlencodedBody.filter(request);\n  \n  assert.equals(result.headers['Content-Type'], 'application/x-www-form-urlencoded');\n});\n"]}